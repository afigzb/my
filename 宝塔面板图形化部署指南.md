# 🖱️ 宝塔面板图形化Git自动部署指南

本指南将教您如何通过宝塔面板的图形界面设置Git自动部署，无需命令行操作！

## 📋 准备工作
- **服务器**: 阿里云 47.107.67.50
- **宝塔面板**: 已安装并可访问
- **部署路径**: `/www/wwwroot/47.107.67.50`

## 🎯 第一步：通过宝塔面板安装软件

### 1. 登录宝塔面板
- 访问: `http://47.107.67.50:8888` (或您的宝塔端口)
- 输入用户名密码登录

### 2. 安装必要软件
- 点击 **软件商店**
- 搜索并安装：
  - **Git** (如果没有)
  - **Node.js版本管理器** 
  - **Nginx** (如果用作Web服务器)

## 📁 第二步：创建项目目录（图形化操作）

### 1. 打开文件管理器
- 在宝塔面板左侧菜单点击 **文件**

### 2. 创建项目目录
- 进入 `/www` 目录
- 点击 **新建文件夹**，命名为 `projects`
- 进入 `projects` 文件夹

### 3. 上传项目文件
**方式A：直接上传源码**
- 将您的本地项目打包为zip文件
- 在宝塔文件管理器中点击 **上传**
- 选择zip文件上传
- 上传完成后右键解压

**方式B：克隆Git仓库**
- 在 `projects` 目录下点击 **终端**
- 执行: `git clone https://github.com/your-username/your-repo.git my`

## 🚀 第三步：上传部署脚本

### 1. 上传deploy.sh文件
- 进入 `/www/projects/my` 目录
- 点击 **上传**
- 将 `deploy.sh` 文件上传到这里

### 2. 设置脚本权限
- 右键点击 `deploy.sh` 文件
- 选择 **权限**
- 设置为 `755` 或勾选 **可执行**

## ⚙️ 第四步：配置自动部署脚本

创建一个简化版的部署脚本，减少命令行依赖：

### 简化版deploy.sh内容：
```bash
#!/bin/bash

echo "🚀 开始自动部署..."

# 进入项目目录
cd /www/projects/my

# 拉取最新代码
git pull origin main

# 安装依赖
npm install

# 构建项目
npm run build

# 备份当前版本
if [ -d "/www/wwwroot/47.107.67.50" ]; then
    cp -r /www/wwwroot/47.107.67.50 /www/backup/backup_$(date +%Y%m%d_%H%M%S)
fi

# 复制新文件
cp -r dist/* /www/wwwroot/47.107.67.50/

# 设置权限
chown -R www:www /www/wwwroot/47.107.67.50

echo "✅ 部署完成！"
```

## 🖱️ 第五步：通过宝塔面板执行部署

### 方法1：使用宝塔终端
1. 在文件管理器中进入 `/www/projects/my`
2. 点击页面上方的 **终端** 按钮
3. 在终端中输入: `./deploy.sh`
4. 按回车执行

### 方法2：使用计划任务
1. 在宝塔面板左侧菜单点击 **计划任务**
2. 点击 **添加任务**
3. 任务类型选择 **Shell脚本**
4. 任务名称填写: `自动部署`
5. 脚本内容填写:
```bash
cd /www/projects/my && ./deploy.sh
```
6. 执行周期可以选择 **手动** 或设置定时
7. 保存后可以手动点击 **执行** 来触发部署

### 方法3：创建一键部署按钮
在宝塔面板创建一个自定义脚本：

1. 进入 **软件商店** → **宝塔插件**
2. 安装 **宝塔一键部署**
3. 或者使用 **计划任务** 功能，设置为手动执行

## 📋 日常使用流程（无命令行）

### 本地开发完成后：

1. **提交代码到GitHub**
   - 使用Git图形工具（如GitHub Desktop、SourceTree等）
   - 或在VS Code中提交推送

2. **宝塔面板一键部署**
   - 登录宝塔面板
   - 进入 **计划任务**
   - 找到 "自动部署" 任务
   - 点击 **执行** 按钮
   - 查看执行日志确认部署成功

## 🔄 更简单的方式：手动文件管理

如果您觉得上述流程还是复杂，可以采用最简单的方式：

### 1. 本地构建
在本地执行：
```bash
npm run build
```

### 2. 宝塔面板文件操作
1. 打开宝塔面板文件管理器
2. 进入 `/www/wwwroot/47.107.67.50`
3. **备份当前文件**：
   - 全选当前文件
   - 右键选择 **压缩**
   - 命名为 `backup_日期.zip`
   - 移动到 `/www/backup/` 目录
4. **上传新文件**：
   - 删除网站目录下的旧文件
   - 将本地 `dist` 文件夹内的所有文件上传
   - 或者打包dist文件夹为zip，上传后解压

### 3. 设置文件权限
- 全选上传的文件
- 右键选择 **权限**
- 设置为 `644`（文件）和 `755`（文件夹）

## 📊 监控部署状态

### 查看部署日志
1. 在宝塔面板中点击 **日志**
2. 查看 **系统日志** 或 **网站日志**
3. 或在计划任务中查看执行日志

### 验证部署结果
1. 访问 `http://47.107.67.50` 查看网站
2. 检查文件更新时间
3. 查看浏览器开发者工具确认资源更新

## 🎯 推荐的简化流程

**最简单的日常部署流程**：

1. **本地开发** → **Git推送**
2. **登录宝塔面板** → **计划任务** → **点击执行部署**
3. **查看执行日志** → **访问网站验证**

这样您就完全不需要用命令行了！🎉

## ⚠️ 注意事项

1. **备份重要文件**：每次部署前建议备份
2. **检查权限**：确保www用户有读写权限  
3. **监控日志**：关注部署过程中的错误信息
4. **测试访问**：部署后及时测试网站功能

---

通过这种方式，您可以完全使用宝塔面板的图形界面来管理部署，告别命令行！✨ 